"use strict";(()=>{var ye=Object.create;var le=Object.defineProperty;var me=Object.getOwnPropertyDescriptor;var xe=Object.getOwnPropertyNames;var we=Object.getPrototypeOf,Te=Object.prototype.hasOwnProperty;var J=(O=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(O,{get:(i,l)=>(typeof require!="undefined"?require:i)[l]}):O)(function(O){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+O+'" is not supported')});var re=(O,i)=>()=>(i||O((i={exports:{}}).exports,i),i.exports);var Oe=(O,i,l,e)=>{if(i&&typeof i=="object"||typeof i=="function")for(let o of xe(i))!Te.call(O,o)&&o!==l&&le(O,o,{get:()=>i[o],enumerable:!(e=me(i,o))||e.enumerable});return O};var ce=(O,i,l)=>(l=O!=null?ye(we(O)):{},Oe(i||!O||!O.__esModule?le(l,"default",{value:O,enumerable:!0}):l,O));var pe=re((fe,ie)=>{(function(O){if(typeof fe=="object"&&typeof ie!="undefined")ie.exports=O();else if(typeof define=="function"&&define.amd)define([],O);else{var i;typeof window!="undefined"?i=window:typeof global!="undefined"?i=global:typeof self!="undefined"?i=self:i=this,i.Airtable=O()}})(function(){var O,i,l;return function(){function e(o,f,r){function t(a,c){if(!f[a]){if(!o[a]){var u=typeof J=="function"&&J;if(!c&&u)return u(a,!0);if(n)return n(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var h=f[a]={exports:{}};o[a][0].call(h.exports,function(d){var m=o[a][1][d];return t(m||d)},h,h.exports,e,o,f,r)}return f[a].exports}for(var n=typeof J=="function"&&J,s=0;s<r.length;s++)t(r[s]);return t}return e}()({1:[function(e,o,f){"use strict";var r;if(typeof window=="undefined")r=e("abort-controller");else if("signal"in new Request(""))r=window.AbortController;else{var t=e("abortcontroller-polyfill/dist/cjs-ponyfill");r=t.AbortController}o.exports=r},{"abort-controller":20,"abortcontroller-polyfill/dist/cjs-ponyfill":19}],2:[function(e,o,f){"use strict";var r=function(){function t(n,s,a){this.error=n,this.message=s,this.statusCode=a}return t.prototype.toString=function(){return[this.message,"(",this.error,")",this.statusCode?"[Http code "+this.statusCode+"]":""].join("")},t}();o.exports=r},{}],3:[function(e,o,f){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(x){for(var b,j=1,E=arguments.length;j<E;j++){b=arguments[j];for(var R in b)Object.prototype.hasOwnProperty.call(b,R)&&(x[R]=b[R])}return x},r.apply(this,arguments)},t=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}},n=t(e("lodash/get")),s=t(e("lodash/isPlainObject")),a=t(e("lodash/keys")),c=t(e("./fetch")),u=t(e("./abort-controller")),p=t(e("./object_to_query_param_string")),h=t(e("./airtable_error")),d=t(e("./table")),m=t(e("./http_headers")),v=t(e("./run_action")),w=t(e("./package_version")),_=t(e("./exponential_backoff_with_jitter")),A="Airtable.js/"+w.default,g=function(){function x(b,j){this._airtable=b,this._id=j}return x.prototype.table=function(b){return new d.default(this,null,b)},x.prototype.makeRequest=function(b){var j=this,E;b===void 0&&(b={});var R=n.default(b,"method","GET").toUpperCase(),S=this._airtable._endpointUrl+"/v"+this._airtable._apiVersionMajor+"/"+this._id+n.default(b,"path","/")+"?"+p.default(n.default(b,"qs",{})),I=new u.default,D=this._getRequestHeaders(Object.assign({},this._airtable._customHeaders,(E=b.headers)!==null&&E!==void 0?E:{})),F={method:R,headers:D,signal:I.signal};"body"in b&&y(R)&&(F.body=JSON.stringify(b.body));var P=setTimeout(function(){I.abort()},this._airtable._requestTimeout);return new Promise(function(C,N){c.default(S,F).then(function(L){if(clearTimeout(P),L.status===429&&!j._airtable._noRetryIfRateLimited){var z=n.default(b,"_numAttempts",0),K=_.default(z);setTimeout(function(){var B=r(r({},b),{_numAttempts:z+1});j.makeRequest(B).then(C).catch(N)},K)}else L.json().then(function(B){var ue=j._checkStatusForError(L.status,B)||T(L.status,B);ue?N(ue):C({statusCode:L.status,headers:L.headers,body:B})}).catch(function(){var B=T(L.status);N(B)})}).catch(function(L){clearTimeout(P),L=new h.default("CONNECTION_ERROR",L.message,null),N(L)})})},x.prototype.runAction=function(b,j,E,R,S){v.default(this,b,j,E,R,S,0)},x.prototype._getRequestHeaders=function(b){var j=new m.default;j.set("Authorization","Bearer "+this._airtable._apiKey),j.set("User-Agent",A),j.set("Content-Type","application/json");for(var E=0,R=a.default(b);E<R.length;E++){var S=R[E];j.set(S,b[S])}return j.toJSON()},x.prototype._checkStatusForError=function(b,j){var E=(j!=null?j:{error:{}}).error,R=E===void 0?{}:E,S=R.type,I=R.message;return b===401?new h.default("AUTHENTICATION_REQUIRED","You should provide valid api key to perform this operation",b):b===403?new h.default("NOT_AUTHORIZED","You are not authorized to perform this operation",b):b===404?new h.default("NOT_FOUND",I!=null?I:"Could not find what you are looking for",b):b===413?new h.default("REQUEST_TOO_LARGE","Request body is too large",b):b===422?new h.default(S!=null?S:"UNPROCESSABLE_ENTITY",I!=null?I:"The operation cannot be processed",b):b===429?new h.default("TOO_MANY_REQUESTS","You have made too many requests in a short period of time. Please retry your request later",b):b===500?new h.default("SERVER_ERROR","Try again. If the problem persists, contact support.",b):b===503?new h.default("SERVICE_UNAVAILABLE","The service is temporarily unavailable. Please retry shortly.",b):b>=400?new h.default(S!=null?S:"UNEXPECTED_ERROR",I!=null?I:"An unexpected error occurred",b):null},x.prototype.doCall=function(b){return this.table(b)},x.prototype.getId=function(){return this._id},x.createFunctor=function(b,j){var E=new x(b,j),R=function(S){return E.doCall(S)};return R._base=E,R.table=E.table.bind(E),R.makeRequest=E.makeRequest.bind(E),R.runAction=E.runAction.bind(E),R.getId=E.getId.bind(E),R},x}();function y(x){return x!=="GET"&&x!=="DELETE"}function T(x,b){return s.default(b)?null:new h.default("UNEXPECTED_ERROR","The response from Airtable was invalid JSON. Please try again soon.",x)}o.exports=g},{"./abort-controller":1,"./airtable_error":2,"./exponential_backoff_with_jitter":6,"./fetch":7,"./http_headers":9,"./object_to_query_param_string":11,"./package_version":12,"./run_action":16,"./table":17,"lodash/get":77,"lodash/isPlainObject":89,"lodash/keys":93}],4:[function(e,o,f){"use strict";function r(t,n,s){return s===void 0&&(s=void 0),function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var u;s===void 0?u=a.length>0?a.length-1:0:u=s;var p=a[u];if(typeof p=="function"){t.apply(n,a);return}else{for(var h=[],d=Math.max(a.length,u),m=0;m<d;m++)h.push(a[m]);return new Promise(function(v,w){h.push(function(_,A){_?w(_):v(A)}),t.apply(n,h)})}}}o.exports=r},{}],5:[function(e,o,f){"use strict";var r={};function t(n,s,a){return function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];r[s]||(r[s]=!0,console.warn(a)),n.apply(this,c)}}o.exports=t},{}],6:[function(e,o,f){"use strict";var r=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},t=r(e("./internal_config.json"));function n(s){var a=t.default.INITIAL_RETRY_DELAY_IF_RATE_LIMITED*Math.pow(2,s),c=Math.min(t.default.MAX_RETRY_DELAY_IF_RATE_LIMITED,a),u=Math.random()*c;return u}o.exports=n},{"./internal_config.json":10}],7:[function(e,o,f){"use strict";var r=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},t=r(e("node-fetch"));o.exports=typeof window=="undefined"?t.default:window.fetch.bind(window)},{"node-fetch":20}],8:[function(e,o,f){"use strict";function r(t,n){return Object.prototype.hasOwnProperty.call(t,n)}o.exports=r},{}],9:[function(e,o,f){"use strict";var r=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=r(e("lodash/keys")),n=typeof window!="undefined",s=function(){function a(){this._headersByLowercasedKey={}}return a.prototype.set=function(c,u){var p=c.toLowerCase();p==="x-airtable-user-agent"&&(p="user-agent",c="User-Agent"),this._headersByLowercasedKey[p]={headerKey:c,headerValue:u}},a.prototype.toJSON=function(){for(var c={},u=0,p=t.default(this._headersByLowercasedKey);u<p.length;u++){var h=p[u],d=this._headersByLowercasedKey[h],m=void 0;n&&h==="user-agent"?m="X-Airtable-User-Agent":m=d.headerKey,c[m]=d.headerValue}return c},a}();o.exports=s},{"lodash/keys":93}],10:[function(e,o,f){o.exports={INITIAL_RETRY_DELAY_IF_RATE_LIMITED:5e3,MAX_RETRY_DELAY_IF_RATE_LIMITED:6e5}},{}],11:[function(e,o,f){"use strict";var r=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}},t=r(e("lodash/isArray")),n=r(e("lodash/isNil")),s=r(e("lodash/keys"));function a(u,p,h){if(t.default(p))for(var d=0;d<p.length;d++){var m=p[d];/\[\]$/.test(u)?h(u,m):a(u+"["+(typeof m=="object"&&m!==null?d:"")+"]",m,h)}else if(typeof p=="object")for(var v=0,w=s.default(p);v<w.length;v++){var _=w[v],m=p[_];a(u+"["+_+"]",m,h)}else h(u,p)}function c(u){for(var p=[],h=function(_,A){A=n.default(A)?"":A,p.push(encodeURIComponent(_)+"="+encodeURIComponent(A))},d=0,m=s.default(u);d<m.length;d++){var v=m[d],w=u[v];a(v,w,h)}return p.join("&").replace(/%20/g,"+")}o.exports=c},{"lodash/isArray":79,"lodash/isNil":85,"lodash/keys":93}],12:[function(e,o,f){"use strict";o.exports="0.11.5"},{}],13:[function(e,o,f){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(_){for(var A,g=1,y=arguments.length;g<y;g++){A=arguments[g];for(var T in A)Object.prototype.hasOwnProperty.call(A,T)&&(_[T]=A[T])}return _},r.apply(this,arguments)},t=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}},n=t(e("lodash/isFunction")),s=t(e("lodash/keys")),a=t(e("./record")),c=t(e("./callback_to_promise")),u=t(e("./has")),p=e("./query_params"),h=t(e("./object_to_query_param_string")),d=function(){function _(A,g){this._table=A,this._params=g,this.firstPage=c.default(m,this),this.eachPage=c.default(v,this,1),this.all=c.default(w,this)}return _.validateParams=function(A){for(var g={},y=[],T=[],x=0,b=s.default(A);x<b.length;x++){var j=b[x],E=A[j];if(u.default(_.paramValidators,j)){var R=_.paramValidators[j],S=R(E);S.pass?g[j]=E:T.push(S.error)}else y.push(j)}return{validParams:g,ignoredKeys:y,errors:T}},_.paramValidators=p.paramValidators,_}();function m(_){if(!n.default(_))throw new Error("The first parameter to `firstPage` must be a function");this.eachPage(function(A){_(null,A)},function(A){_(A,null)})}function v(_,A){var g=this;if(!n.default(_))throw new Error("The first parameter to `eachPage` must be a function");if(!n.default(A)&&A!==void 0)throw new Error("The second parameter to `eachPage` must be a function or undefined");var y=r({},this._params),T="/"+this._table._urlEncodedNameOrId()+"?"+h.default(y),x={},b=null,j,E;if(y.method==="post"||T.length>p.URL_CHARACTER_LENGTH_LIMIT){b=y,j="post",E="/"+this._table._urlEncodedNameOrId()+"/listRecords";for(var R=Object.keys(y),S=0,I=R;S<I.length;S++){var D=I[S];p.shouldListRecordsParamBePassedAsParameter(D)?x[D]=y[D]:b[D]=y[D]}}else j="get",x=y,E="/"+this._table._urlEncodedNameOrId();var F=function(){g._table._base.runAction(j,E,x,b,function(P,C,N){if(P)A(P,null);else{var L=void 0;N.offset?(y.offset=N.offset,L=F):L=function(){A(null)};var z=N.records.map(function(K){return new a.default(g._table,null,K)});_(z,L)}})};F()}function w(_){if(!n.default(_))throw new Error("The first parameter to `all` must be a function");var A=[];this.eachPage(function(g,y){A.push.apply(A,g),y()},function(g){g?_(g,null):_(null,A)})}o.exports=d},{"./callback_to_promise":4,"./has":8,"./object_to_query_param_string":11,"./query_params":14,"./record":15,"lodash/isFunction":83,"lodash/keys":93}],14:[function(e,o,f){"use strict";var r=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(f,"__esModule",{value:!0}),f.shouldListRecordsParamBePassedAsParameter=f.URL_CHARACTER_LENGTH_LIMIT=f.paramValidators=void 0;var t=r(e("./typecheck")),n=r(e("lodash/isString")),s=r(e("lodash/isNumber")),a=r(e("lodash/isPlainObject")),c=r(e("lodash/isBoolean"));f.paramValidators={fields:t.default(t.default.isArrayOf(n.default),"the value for `fields` should be an array of strings"),filterByFormula:t.default(n.default,"the value for `filterByFormula` should be a string"),maxRecords:t.default(s.default,"the value for `maxRecords` should be a number"),pageSize:t.default(s.default,"the value for `pageSize` should be a number"),offset:t.default(s.default,"the value for `offset` should be a number"),sort:t.default(t.default.isArrayOf(function(u){return a.default(u)&&n.default(u.field)&&(u.direction===void 0||["asc","desc"].includes(u.direction))}),'the value for `sort` should be an array of sort objects. Each sort object must have a string `field` value, and an optional `direction` value that is "asc" or "desc".'),view:t.default(n.default,"the value for `view` should be a string"),cellFormat:t.default(function(u){return n.default(u)&&["json","string"].includes(u)},'the value for `cellFormat` should be "json" or "string"'),timeZone:t.default(n.default,"the value for `timeZone` should be a string"),userLocale:t.default(n.default,"the value for `userLocale` should be a string"),method:t.default(function(u){return n.default(u)&&["get","post"].includes(u)},'the value for `method` should be "get" or "post"'),returnFieldsByFieldId:t.default(c.default,"the value for `returnFieldsByFieldId` should be a boolean")},f.URL_CHARACTER_LENGTH_LIMIT=15e3,f.shouldListRecordsParamBePassedAsParameter=function(u){return u==="timeZone"||u==="userLocale"}},{"./typecheck":18,"lodash/isBoolean":81,"lodash/isNumber":86,"lodash/isPlainObject":89,"lodash/isString":90}],15:[function(e,o,f){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(d){for(var m,v=1,w=arguments.length;v<w;v++){m=arguments[v];for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(d[_]=m[_])}return d},r.apply(this,arguments)},t=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}},n=t(e("./callback_to_promise")),s=function(){function d(m,v,w){this._table=m,this.id=v||w.id,this.setRawJson(w),this.save=n.default(a,this),this.patchUpdate=n.default(c,this),this.putUpdate=n.default(u,this),this.destroy=n.default(p,this),this.fetch=n.default(h,this),this.updateFields=this.patchUpdate,this.replaceFields=this.putUpdate}return d.prototype.getId=function(){return this.id},d.prototype.get=function(m){return this.fields[m]},d.prototype.set=function(m,v){this.fields[m]=v},d.prototype.setRawJson=function(m){this._rawJson=m,this.fields=this._rawJson&&this._rawJson.fields||{}},d}();function a(d){this.putUpdate(this.fields,d)}function c(d,m,v){var w=this;v||(v=m,m={});var _=r({fields:d},m);this._table._base.runAction("patch","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},_,function(A,g,y){if(A){v(A);return}w.setRawJson(y),v(null,w)})}function u(d,m,v){var w=this;v||(v=m,m={});var _=r({fields:d},m);this._table._base.runAction("put","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},_,function(A,g,y){if(A){v(A);return}w.setRawJson(y),v(null,w)})}function p(d){var m=this;this._table._base.runAction("delete","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},null,function(v){if(v){d(v);return}d(null,m)})}function h(d){var m=this;this._table._base.runAction("get","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},null,function(v,w,_){if(v){d(v);return}m.setRawJson(_),d(null,m)})}o.exports=s},{"./callback_to_promise":4}],16:[function(e,o,f){"use strict";var r=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}},t=r(e("./exponential_backoff_with_jitter")),n=r(e("./object_to_query_param_string")),s=r(e("./package_version")),a=r(e("./fetch")),c=r(e("./abort-controller")),u="Airtable.js/"+s.default;function p(h,d,m,v,w,_,A){var g=h._airtable._endpointUrl+"/v"+h._airtable._apiVersionMajor+"/"+h._id+m+"?"+n.default(v),y={authorization:"Bearer "+h._airtable._apiKey,"x-api-version":h._airtable._apiVersion,"x-airtable-application-id":h.getId(),"content-type":"application/json"},T=typeof window!="undefined";T?y["x-airtable-user-agent"]=u:y["User-Agent"]=u;var x=new c.default,b=d.toUpperCase(),j={method:b,headers:y,signal:x.signal};w!==null&&(b==="GET"||b==="HEAD"?console.warn("body argument to runAction are ignored with GET or HEAD requests"):j.body=JSON.stringify(w));var E=setTimeout(function(){x.abort()},h._airtable._requestTimeout);a.default(g,j).then(function(R){if(clearTimeout(E),R.status===429&&!h._airtable._noRetryIfRateLimited){var S=t.default(A);setTimeout(function(){p(h,d,m,v,w,_,A+1)},S)}else R.json().then(function(I){var D=h._checkStatusForError(R.status,I),F={};Object.keys(R).forEach(function(P){F[P]=R[P]}),F.body=I,F.statusCode=R.status,_(D,F,I)}).catch(function(){_(h._checkStatusForError(R.status))})}).catch(function(R){clearTimeout(E),_(R)})}o.exports=p},{"./abort-controller":1,"./exponential_backoff_with_jitter":6,"./fetch":7,"./object_to_query_param_string":11,"./package_version":12}],17:[function(e,o,f){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(m){for(var v,w=1,_=arguments.length;w<_;w++){v=arguments[w];for(var A in v)Object.prototype.hasOwnProperty.call(v,A)&&(m[A]=v[A])}return m},r.apply(this,arguments)},t=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}},n=t(e("lodash/isPlainObject")),s=t(e("./deprecate")),a=t(e("./query")),c=e("./query_params"),u=t(e("./object_to_query_param_string")),p=t(e("./record")),h=t(e("./callback_to_promise")),d=function(){function m(v,w,_){if(!w&&!_)throw new Error("Table name or table ID is required");this._base=v,this.id=w,this.name=_,this.find=h.default(this._findRecordById,this),this.select=this._selectRecords.bind(this),this.create=h.default(this._createRecords,this),this.update=h.default(this._updateRecords.bind(this,!1),this),this.replace=h.default(this._updateRecords.bind(this,!0),this),this.destroy=h.default(this._destroyRecord,this),this.list=s.default(this._listRecords.bind(this),"table.list","Airtable: `list()` is deprecated. Use `select()` instead."),this.forEach=s.default(this._forEachRecord.bind(this),"table.forEach","Airtable: `forEach()` is deprecated. Use `select()` instead.")}return m.prototype._findRecordById=function(v,w){var _=new p.default(this,v);_.fetch(w)},m.prototype._selectRecords=function(v){if(v===void 0&&(v={}),arguments.length>1&&console.warn("Airtable: `select` takes only one parameter, but it was given "+arguments.length+" parameters. Use `eachPage` or `firstPage` to fetch records."),n.default(v)){var w=a.default.validateParams(v);if(w.errors.length){var _=w.errors.map(function(A){return"  * "+A});throw new Error("Airtable: invalid parameters for `select`:\n"+_.join(`
`))}return w.ignoredKeys.length&&console.warn("Airtable: the following parameters to `select` will be ignored: "+w.ignoredKeys.join(", ")),new a.default(this,w.validParams)}else throw new Error("Airtable: the parameter for `select` should be a plain object or undefined.")},m.prototype._urlEncodedNameOrId=function(){return this.id||encodeURIComponent(this.name)},m.prototype._createRecords=function(v,w,_){var A=this,g=Array.isArray(v);_||(_=w,w={});var y;g?y=r({records:v},w):y=r({fields:v},w),this._base.runAction("post","/"+this._urlEncodedNameOrId()+"/",{},y,function(T,x,b){if(T){_(T);return}var j;g?j=b.records.map(function(E){return new p.default(A,E.id,E)}):j=new p.default(A,b.id,b),_(null,j)})},m.prototype._updateRecords=function(v,w,_,A,g){var y=this,T;if(Array.isArray(w)){var x=w;T=n.default(_)?_:{},g=A||_;var b=v?"put":"patch",j=r({records:x},T);this._base.runAction(b,"/"+this._urlEncodedNameOrId()+"/",{},j,function(I,D,F){if(I){g(I);return}var P=F.records.map(function(C){return new p.default(y,C.id,C)});g(null,P)})}else{var E=w,R=_;T=n.default(A)?A:{},g=g||A;var S=new p.default(this,E);v?S.putUpdate(R,T,g):S.patchUpdate(R,T,g)}},m.prototype._destroyRecord=function(v,w){var _=this;if(Array.isArray(v)){var A={records:v};this._base.runAction("delete","/"+this._urlEncodedNameOrId(),A,null,function(y,T,x){if(y){w(y);return}var b=x.records.map(function(j){var E=j.id;return new p.default(_,E,null)});w(null,b)})}else{var g=new p.default(this,v);g.destroy(w)}},m.prototype._listRecords=function(v,w,_,A){var g=this;A||(A=_,_={});var y="/"+this._urlEncodedNameOrId()+"?"+u.default(_),T,x={},b=null,j;if(typeof _!="function"&&_.method==="post"||y.length>c.URL_CHARACTER_LENGTH_LIMIT){T="/"+this._urlEncodedNameOrId()+"/listRecords",b=r(r({},v&&{pageSize:v}),w&&{offset:w}),j="post";for(var E=Object.keys(_),R=0,S=E;R<S.length;R++){var I=S[R];c.shouldListRecordsParamBePassedAsParameter(I)?x[I]=_[I]:b[I]=_[I]}}else j="get",T="/"+this._urlEncodedNameOrId()+"/",x=r({limit:v,offset:w},_);this._base.runAction(j,T,x,b,function(D,F,P){if(D){A(D);return}var C=P.records.map(function(N){return new p.default(g,null,N)});A(null,C,P.offset)})},m.prototype._forEachRecord=function(v,w,_){var A=this;arguments.length===2&&(_=w,w=v,v={});var g=m.__recordsPerPageForIteration||100,y=null,T=function(){A._listRecords(g,y,v,function(x,b,j){if(x){_(x);return}for(var E=0;E<b.length;E++)w(b[E]);j?(y=j,T()):_()})};T()},m}();o.exports=d},{"./callback_to_promise":4,"./deprecate":5,"./object_to_query_param_string":11,"./query":13,"./query_params":14,"./record":15,"lodash/isPlainObject":89}],18:[function(e,o,f){"use strict";function r(t,n){return function(s){return t(s)?{pass:!0}:{pass:!1,error:n}}}r.isOneOf=function(n){return n.includes.bind(n)},r.isArrayOf=function(t){return function(n){return Array.isArray(n)&&n.every(t)}},o.exports=r},{}],19:[function(e,o,f){"use strict";Object.defineProperty(f,"__esModule",{value:!0});function r(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function t(g,y){for(var T=0;T<y.length;T++){var x=y[T];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}function n(g,y,T){return y&&t(g.prototype,y),T&&t(g,T),g}function s(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),y&&c(g,y)}function a(g){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},a(g)}function c(g,y){return c=Object.setPrototypeOf||function(x,b){return x.__proto__=b,x},c(g,y)}function u(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function p(g,y){return y&&(typeof y=="object"||typeof y=="function")?y:u(g)}function h(g,y){for(;!Object.prototype.hasOwnProperty.call(g,y)&&(g=a(g),g!==null););return g}function d(g,y,T){return typeof Reflect!="undefined"&&Reflect.get?d=Reflect.get:d=function(b,j,E){var R=h(b,j);if(!!R){var S=Object.getOwnPropertyDescriptor(R,j);return S.get?S.get.call(E):S.value}},d(g,y,T||g)}var m=function(){function g(){r(this,g),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(g,[{key:"addEventListener",value:function(T,x){T in this.listeners||(this.listeners[T]=[]),this.listeners[T].push(x)}},{key:"removeEventListener",value:function(T,x){if(T in this.listeners){for(var b=this.listeners[T],j=0,E=b.length;j<E;j++)if(b[j]===x){b.splice(j,1);return}}}},{key:"dispatchEvent",value:function(T){var x=this;if(T.type in this.listeners){for(var b=function(I){setTimeout(function(){return I.call(x,T)})},j=this.listeners[T.type],E=0,R=j.length;E<R;E++)b(j[E]);return!T.defaultPrevented}}}]),g}(),v=function(g){s(y,g);function y(){var T;return r(this,y),T=p(this,a(y).call(this)),T.listeners||m.call(u(T)),Object.defineProperty(u(T),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(u(T),"onabort",{value:null,writable:!0,configurable:!0}),T}return n(y,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(x){x.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,x)),d(a(y.prototype),"dispatchEvent",this).call(this,x)}}]),y}(m),w=function(){function g(){r(this,g),Object.defineProperty(this,"signal",{value:new v,writable:!0,configurable:!0})}return n(g,[{key:"abort",value:function(){var T;try{T=new Event("abort")}catch(x){typeof document!="undefined"?document.createEvent?(T=document.createEvent("Event"),T.initEvent("abort",!1,!1)):(T=document.createEventObject(),T.type="abort"):T={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(T)}},{key:"toString",value:function(){return"[object AbortController]"}}]),g}();typeof Symbol!="undefined"&&Symbol.toStringTag&&(w.prototype[Symbol.toStringTag]="AbortController",v.prototype[Symbol.toStringTag]="AbortSignal");function _(g){return g.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof g.Request=="function"&&!g.Request.prototype.hasOwnProperty("signal")||!g.AbortController}function A(g){typeof g=="function"&&(g={fetch:g});var y=g,T=y.fetch,x=y.Request,b=x===void 0?T.Request:x,j=y.AbortController,E=y.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,R=E===void 0?!1:E;if(!_({fetch:T,Request:b,AbortController:j,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:R}))return{fetch:T,Request:S};var S=b;(S&&!S.prototype.hasOwnProperty("signal")||R)&&(S=function(P,C){var N;C&&C.signal&&(N=C.signal,delete C.signal);var L=new b(P,C);return N&&Object.defineProperty(L,"signal",{writable:!1,enumerable:!1,configurable:!0,value:N}),L},S.prototype=b.prototype);var I=T,D=function(P,C){var N=S&&S.prototype.isPrototypeOf(P)?P.signal:C?C.signal:void 0;if(N){var L;try{L=new DOMException("Aborted","AbortError")}catch(K){L=new Error("Aborted"),L.name="AbortError"}if(N.aborted)return Promise.reject(L);var z=new Promise(function(K,B){N.addEventListener("abort",function(){return B(L)},{once:!0})});return C&&C.signal&&delete C.signal,Promise.race([z,I(P,C)])}return I(P,C)};return{fetch:D,Request:S}}f.AbortController=w,f.AbortSignal=v,f.abortableFetch=A},{}],20:[function(e,o,f){},{}],21:[function(e,o,f){var r=e("./_hashClear"),t=e("./_hashDelete"),n=e("./_hashGet"),s=e("./_hashHas"),a=e("./_hashSet");function c(u){var p=-1,h=u==null?0:u.length;for(this.clear();++p<h;){var d=u[p];this.set(d[0],d[1])}}c.prototype.clear=r,c.prototype.delete=t,c.prototype.get=n,c.prototype.has=s,c.prototype.set=a,o.exports=c},{"./_hashClear":46,"./_hashDelete":47,"./_hashGet":48,"./_hashHas":49,"./_hashSet":50}],22:[function(e,o,f){var r=e("./_listCacheClear"),t=e("./_listCacheDelete"),n=e("./_listCacheGet"),s=e("./_listCacheHas"),a=e("./_listCacheSet");function c(u){var p=-1,h=u==null?0:u.length;for(this.clear();++p<h;){var d=u[p];this.set(d[0],d[1])}}c.prototype.clear=r,c.prototype.delete=t,c.prototype.get=n,c.prototype.has=s,c.prototype.set=a,o.exports=c},{"./_listCacheClear":56,"./_listCacheDelete":57,"./_listCacheGet":58,"./_listCacheHas":59,"./_listCacheSet":60}],23:[function(e,o,f){var r=e("./_getNative"),t=e("./_root"),n=r(t,"Map");o.exports=n},{"./_getNative":42,"./_root":72}],24:[function(e,o,f){var r=e("./_mapCacheClear"),t=e("./_mapCacheDelete"),n=e("./_mapCacheGet"),s=e("./_mapCacheHas"),a=e("./_mapCacheSet");function c(u){var p=-1,h=u==null?0:u.length;for(this.clear();++p<h;){var d=u[p];this.set(d[0],d[1])}}c.prototype.clear=r,c.prototype.delete=t,c.prototype.get=n,c.prototype.has=s,c.prototype.set=a,o.exports=c},{"./_mapCacheClear":61,"./_mapCacheDelete":62,"./_mapCacheGet":63,"./_mapCacheHas":64,"./_mapCacheSet":65}],25:[function(e,o,f){var r=e("./_root"),t=r.Symbol;o.exports=t},{"./_root":72}],26:[function(e,o,f){var r=e("./_baseTimes"),t=e("./isArguments"),n=e("./isArray"),s=e("./isBuffer"),a=e("./_isIndex"),c=e("./isTypedArray"),u=Object.prototype,p=u.hasOwnProperty;function h(d,m){var v=n(d),w=!v&&t(d),_=!v&&!w&&s(d),A=!v&&!w&&!_&&c(d),g=v||w||_||A,y=g?r(d.length,String):[],T=y.length;for(var x in d)(m||p.call(d,x))&&!(g&&(x=="length"||_&&(x=="offset"||x=="parent")||A&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||a(x,T)))&&y.push(x);return y}o.exports=h},{"./_baseTimes":35,"./_isIndex":51,"./isArguments":78,"./isArray":79,"./isBuffer":82,"./isTypedArray":92}],27:[function(e,o,f){function r(t,n){for(var s=-1,a=t==null?0:t.length,c=Array(a);++s<a;)c[s]=n(t[s],s,t);return c}o.exports=r},{}],28:[function(e,o,f){var r=e("./eq");function t(n,s){for(var a=n.length;a--;)if(r(n[a][0],s))return a;return-1}o.exports=t},{"./eq":76}],29:[function(e,o,f){var r=e("./_castPath"),t=e("./_toKey");function n(s,a){a=r(a,s);for(var c=0,u=a.length;s!=null&&c<u;)s=s[t(a[c++])];return c&&c==u?s:void 0}o.exports=n},{"./_castPath":38,"./_toKey":74}],30:[function(e,o,f){var r=e("./_Symbol"),t=e("./_getRawTag"),n=e("./_objectToString"),s="[object Null]",a="[object Undefined]",c=r?r.toStringTag:void 0;function u(p){return p==null?p===void 0?a:s:c&&c in Object(p)?t(p):n(p)}o.exports=u},{"./_Symbol":25,"./_getRawTag":44,"./_objectToString":70}],31:[function(e,o,f){var r=e("./_baseGetTag"),t=e("./isObjectLike"),n="[object Arguments]";function s(a){return t(a)&&r(a)==n}o.exports=s},{"./_baseGetTag":30,"./isObjectLike":88}],32:[function(e,o,f){var r=e("./isFunction"),t=e("./_isMasked"),n=e("./isObject"),s=e("./_toSource"),a=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,u=Function.prototype,p=Object.prototype,h=u.toString,d=p.hasOwnProperty,m=RegExp("^"+h.call(d).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(w){if(!n(w)||t(w))return!1;var _=r(w)?m:c;return _.test(s(w))}o.exports=v},{"./_isMasked":54,"./_toSource":75,"./isFunction":83,"./isObject":87}],33:[function(e,o,f){var r=e("./_baseGetTag"),t=e("./isLength"),n=e("./isObjectLike"),s="[object Arguments]",a="[object Array]",c="[object Boolean]",u="[object Date]",p="[object Error]",h="[object Function]",d="[object Map]",m="[object Number]",v="[object Object]",w="[object RegExp]",_="[object Set]",A="[object String]",g="[object WeakMap]",y="[object ArrayBuffer]",T="[object DataView]",x="[object Float32Array]",b="[object Float64Array]",j="[object Int8Array]",E="[object Int16Array]",R="[object Int32Array]",S="[object Uint8Array]",I="[object Uint8ClampedArray]",D="[object Uint16Array]",F="[object Uint32Array]",P={};P[x]=P[b]=P[j]=P[E]=P[R]=P[S]=P[I]=P[D]=P[F]=!0,P[s]=P[a]=P[y]=P[c]=P[T]=P[u]=P[p]=P[h]=P[d]=P[m]=P[v]=P[w]=P[_]=P[A]=P[g]=!1;function C(N){return n(N)&&t(N.length)&&!!P[r(N)]}o.exports=C},{"./_baseGetTag":30,"./isLength":84,"./isObjectLike":88}],34:[function(e,o,f){var r=e("./_isPrototype"),t=e("./_nativeKeys"),n=Object.prototype,s=n.hasOwnProperty;function a(c){if(!r(c))return t(c);var u=[];for(var p in Object(c))s.call(c,p)&&p!="constructor"&&u.push(p);return u}o.exports=a},{"./_isPrototype":55,"./_nativeKeys":68}],35:[function(e,o,f){function r(t,n){for(var s=-1,a=Array(t);++s<t;)a[s]=n(s);return a}o.exports=r},{}],36:[function(e,o,f){var r=e("./_Symbol"),t=e("./_arrayMap"),n=e("./isArray"),s=e("./isSymbol"),a=1/0,c=r?r.prototype:void 0,u=c?c.toString:void 0;function p(h){if(typeof h=="string")return h;if(n(h))return t(h,p)+"";if(s(h))return u?u.call(h):"";var d=h+"";return d=="0"&&1/h==-a?"-0":d}o.exports=p},{"./_Symbol":25,"./_arrayMap":27,"./isArray":79,"./isSymbol":91}],37:[function(e,o,f){function r(t){return function(n){return t(n)}}o.exports=r},{}],38:[function(e,o,f){var r=e("./isArray"),t=e("./_isKey"),n=e("./_stringToPath"),s=e("./toString");function a(c,u){return r(c)?c:t(c,u)?[c]:n(s(c))}o.exports=a},{"./_isKey":52,"./_stringToPath":73,"./isArray":79,"./toString":96}],39:[function(e,o,f){var r=e("./_root"),t=r["__core-js_shared__"];o.exports=t},{"./_root":72}],40:[function(e,o,f){(function(r){var t=typeof r=="object"&&r&&r.Object===Object&&r;o.exports=t}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],41:[function(e,o,f){var r=e("./_isKeyable");function t(n,s){var a=n.__data__;return r(s)?a[typeof s=="string"?"string":"hash"]:a.map}o.exports=t},{"./_isKeyable":53}],42:[function(e,o,f){var r=e("./_baseIsNative"),t=e("./_getValue");function n(s,a){var c=t(s,a);return r(c)?c:void 0}o.exports=n},{"./_baseIsNative":32,"./_getValue":45}],43:[function(e,o,f){var r=e("./_overArg"),t=r(Object.getPrototypeOf,Object);o.exports=t},{"./_overArg":71}],44:[function(e,o,f){var r=e("./_Symbol"),t=Object.prototype,n=t.hasOwnProperty,s=t.toString,a=r?r.toStringTag:void 0;function c(u){var p=n.call(u,a),h=u[a];try{u[a]=void 0;var d=!0}catch(v){}var m=s.call(u);return d&&(p?u[a]=h:delete u[a]),m}o.exports=c},{"./_Symbol":25}],45:[function(e,o,f){function r(t,n){return t==null?void 0:t[n]}o.exports=r},{}],46:[function(e,o,f){var r=e("./_nativeCreate");function t(){this.__data__=r?r(null):{},this.size=0}o.exports=t},{"./_nativeCreate":67}],47:[function(e,o,f){function r(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}o.exports=r},{}],48:[function(e,o,f){var r=e("./_nativeCreate"),t="__lodash_hash_undefined__",n=Object.prototype,s=n.hasOwnProperty;function a(c){var u=this.__data__;if(r){var p=u[c];return p===t?void 0:p}return s.call(u,c)?u[c]:void 0}o.exports=a},{"./_nativeCreate":67}],49:[function(e,o,f){var r=e("./_nativeCreate"),t=Object.prototype,n=t.hasOwnProperty;function s(a){var c=this.__data__;return r?c[a]!==void 0:n.call(c,a)}o.exports=s},{"./_nativeCreate":67}],50:[function(e,o,f){var r=e("./_nativeCreate"),t="__lodash_hash_undefined__";function n(s,a){var c=this.__data__;return this.size+=this.has(s)?0:1,c[s]=r&&a===void 0?t:a,this}o.exports=n},{"./_nativeCreate":67}],51:[function(e,o,f){var r=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(s,a){var c=typeof s;return a=a==null?r:a,!!a&&(c=="number"||c!="symbol"&&t.test(s))&&s>-1&&s%1==0&&s<a}o.exports=n},{}],52:[function(e,o,f){var r=e("./isArray"),t=e("./isSymbol"),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function a(c,u){if(r(c))return!1;var p=typeof c;return p=="number"||p=="symbol"||p=="boolean"||c==null||t(c)?!0:s.test(c)||!n.test(c)||u!=null&&c in Object(u)}o.exports=a},{"./isArray":79,"./isSymbol":91}],53:[function(e,o,f){function r(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}o.exports=r},{}],54:[function(e,o,f){var r=e("./_coreJsData"),t=function(){var s=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function n(s){return!!t&&t in s}o.exports=n},{"./_coreJsData":39}],55:[function(e,o,f){var r=Object.prototype;function t(n){var s=n&&n.constructor,a=typeof s=="function"&&s.prototype||r;return n===a}o.exports=t},{}],56:[function(e,o,f){function r(){this.__data__=[],this.size=0}o.exports=r},{}],57:[function(e,o,f){var r=e("./_assocIndexOf"),t=Array.prototype,n=t.splice;function s(a){var c=this.__data__,u=r(c,a);if(u<0)return!1;var p=c.length-1;return u==p?c.pop():n.call(c,u,1),--this.size,!0}o.exports=s},{"./_assocIndexOf":28}],58:[function(e,o,f){var r=e("./_assocIndexOf");function t(n){var s=this.__data__,a=r(s,n);return a<0?void 0:s[a][1]}o.exports=t},{"./_assocIndexOf":28}],59:[function(e,o,f){var r=e("./_assocIndexOf");function t(n){return r(this.__data__,n)>-1}o.exports=t},{"./_assocIndexOf":28}],60:[function(e,o,f){var r=e("./_assocIndexOf");function t(n,s){var a=this.__data__,c=r(a,n);return c<0?(++this.size,a.push([n,s])):a[c][1]=s,this}o.exports=t},{"./_assocIndexOf":28}],61:[function(e,o,f){var r=e("./_Hash"),t=e("./_ListCache"),n=e("./_Map");function s(){this.size=0,this.__data__={hash:new r,map:new(n||t),string:new r}}o.exports=s},{"./_Hash":21,"./_ListCache":22,"./_Map":23}],62:[function(e,o,f){var r=e("./_getMapData");function t(n){var s=r(this,n).delete(n);return this.size-=s?1:0,s}o.exports=t},{"./_getMapData":41}],63:[function(e,o,f){var r=e("./_getMapData");function t(n){return r(this,n).get(n)}o.exports=t},{"./_getMapData":41}],64:[function(e,o,f){var r=e("./_getMapData");function t(n){return r(this,n).has(n)}o.exports=t},{"./_getMapData":41}],65:[function(e,o,f){var r=e("./_getMapData");function t(n,s){var a=r(this,n),c=a.size;return a.set(n,s),this.size+=a.size==c?0:1,this}o.exports=t},{"./_getMapData":41}],66:[function(e,o,f){var r=e("./memoize"),t=500;function n(s){var a=r(s,function(u){return c.size===t&&c.clear(),u}),c=a.cache;return a}o.exports=n},{"./memoize":94}],67:[function(e,o,f){var r=e("./_getNative"),t=r(Object,"create");o.exports=t},{"./_getNative":42}],68:[function(e,o,f){var r=e("./_overArg"),t=r(Object.keys,Object);o.exports=t},{"./_overArg":71}],69:[function(e,o,f){var r=e("./_freeGlobal"),t=typeof f=="object"&&f&&!f.nodeType&&f,n=t&&typeof o=="object"&&o&&!o.nodeType&&o,s=n&&n.exports===t,a=s&&r.process,c=function(){try{var u=n&&n.require&&n.require("util").types;return u||a&&a.binding&&a.binding("util")}catch(p){}}();o.exports=c},{"./_freeGlobal":40}],70:[function(e,o,f){var r=Object.prototype,t=r.toString;function n(s){return t.call(s)}o.exports=n},{}],71:[function(e,o,f){function r(t,n){return function(s){return t(n(s))}}o.exports=r},{}],72:[function(e,o,f){var r=e("./_freeGlobal"),t=typeof self=="object"&&self&&self.Object===Object&&self,n=r||t||Function("return this")();o.exports=n},{"./_freeGlobal":40}],73:[function(e,o,f){var r=e("./_memoizeCapped"),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,s=r(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(t,function(u,p,h,d){c.push(h?d.replace(n,"$1"):p||u)}),c});o.exports=s},{"./_memoizeCapped":66}],74:[function(e,o,f){var r=e("./isSymbol"),t=1/0;function n(s){if(typeof s=="string"||r(s))return s;var a=s+"";return a=="0"&&1/s==-t?"-0":a}o.exports=n},{"./isSymbol":91}],75:[function(e,o,f){var r=Function.prototype,t=r.toString;function n(s){if(s!=null){try{return t.call(s)}catch(a){}try{return s+""}catch(a){}}return""}o.exports=n},{}],76:[function(e,o,f){function r(t,n){return t===n||t!==t&&n!==n}o.exports=r},{}],77:[function(e,o,f){var r=e("./_baseGet");function t(n,s,a){var c=n==null?void 0:r(n,s);return c===void 0?a:c}o.exports=t},{"./_baseGet":29}],78:[function(e,o,f){var r=e("./_baseIsArguments"),t=e("./isObjectLike"),n=Object.prototype,s=n.hasOwnProperty,a=n.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(u){return t(u)&&s.call(u,"callee")&&!a.call(u,"callee")};o.exports=c},{"./_baseIsArguments":31,"./isObjectLike":88}],79:[function(e,o,f){var r=Array.isArray;o.exports=r},{}],80:[function(e,o,f){var r=e("./isFunction"),t=e("./isLength");function n(s){return s!=null&&t(s.length)&&!r(s)}o.exports=n},{"./isFunction":83,"./isLength":84}],81:[function(e,o,f){var r=e("./_baseGetTag"),t=e("./isObjectLike"),n="[object Boolean]";function s(a){return a===!0||a===!1||t(a)&&r(a)==n}o.exports=s},{"./_baseGetTag":30,"./isObjectLike":88}],82:[function(e,o,f){var r=e("./_root"),t=e("./stubFalse"),n=typeof f=="object"&&f&&!f.nodeType&&f,s=n&&typeof o=="object"&&o&&!o.nodeType&&o,a=s&&s.exports===n,c=a?r.Buffer:void 0,u=c?c.isBuffer:void 0,p=u||t;o.exports=p},{"./_root":72,"./stubFalse":95}],83:[function(e,o,f){var r=e("./_baseGetTag"),t=e("./isObject"),n="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",c="[object Proxy]";function u(p){if(!t(p))return!1;var h=r(p);return h==s||h==a||h==n||h==c}o.exports=u},{"./_baseGetTag":30,"./isObject":87}],84:[function(e,o,f){var r=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=r}o.exports=t},{}],85:[function(e,o,f){function r(t){return t==null}o.exports=r},{}],86:[function(e,o,f){var r=e("./_baseGetTag"),t=e("./isObjectLike"),n="[object Number]";function s(a){return typeof a=="number"||t(a)&&r(a)==n}o.exports=s},{"./_baseGetTag":30,"./isObjectLike":88}],87:[function(e,o,f){function r(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}o.exports=r},{}],88:[function(e,o,f){function r(t){return t!=null&&typeof t=="object"}o.exports=r},{}],89:[function(e,o,f){var r=e("./_baseGetTag"),t=e("./_getPrototype"),n=e("./isObjectLike"),s="[object Object]",a=Function.prototype,c=Object.prototype,u=a.toString,p=c.hasOwnProperty,h=u.call(Object);function d(m){if(!n(m)||r(m)!=s)return!1;var v=t(m);if(v===null)return!0;var w=p.call(v,"constructor")&&v.constructor;return typeof w=="function"&&w instanceof w&&u.call(w)==h}o.exports=d},{"./_baseGetTag":30,"./_getPrototype":43,"./isObjectLike":88}],90:[function(e,o,f){var r=e("./_baseGetTag"),t=e("./isArray"),n=e("./isObjectLike"),s="[object String]";function a(c){return typeof c=="string"||!t(c)&&n(c)&&r(c)==s}o.exports=a},{"./_baseGetTag":30,"./isArray":79,"./isObjectLike":88}],91:[function(e,o,f){var r=e("./_baseGetTag"),t=e("./isObjectLike"),n="[object Symbol]";function s(a){return typeof a=="symbol"||t(a)&&r(a)==n}o.exports=s},{"./_baseGetTag":30,"./isObjectLike":88}],92:[function(e,o,f){var r=e("./_baseIsTypedArray"),t=e("./_baseUnary"),n=e("./_nodeUtil"),s=n&&n.isTypedArray,a=s?t(s):r;o.exports=a},{"./_baseIsTypedArray":33,"./_baseUnary":37,"./_nodeUtil":69}],93:[function(e,o,f){var r=e("./_arrayLikeKeys"),t=e("./_baseKeys"),n=e("./isArrayLike");function s(a){return n(a)?r(a):t(a)}o.exports=s},{"./_arrayLikeKeys":26,"./_baseKeys":34,"./isArrayLike":80}],94:[function(e,o,f){var r=e("./_MapCache"),t="Expected a function";function n(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var c=function(){var u=arguments,p=a?a.apply(this,u):u[0],h=c.cache;if(h.has(p))return h.get(p);var d=s.apply(this,u);return c.cache=h.set(p,d)||h,d};return c.cache=new(n.Cache||r),c}n.Cache=r,o.exports=n},{"./_MapCache":24}],95:[function(e,o,f){function r(){return!1}o.exports=r},{}],96:[function(e,o,f){var r=e("./_baseToString");function t(n){return n==null?"":r(n)}o.exports=t},{"./_baseToString":36}],airtable:[function(e,o,f){"use strict";var r=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}},t=r(e("./base")),n=r(e("./record")),s=r(e("./table")),a=r(e("./airtable_error")),c=function(){function u(p){p===void 0&&(p={});var h=u.default_config(),d=p.apiVersion||u.apiVersion||h.apiVersion;if(Object.defineProperties(this,{_apiKey:{value:p.apiKey||u.apiKey||h.apiKey},_apiVersion:{value:d},_apiVersionMajor:{value:d.split(".")[0]},_customHeaders:{value:p.customHeaders||{}},_endpointUrl:{value:p.endpointUrl||u.endpointUrl||h.endpointUrl},_noRetryIfRateLimited:{value:p.noRetryIfRateLimited||u.noRetryIfRateLimited||h.noRetryIfRateLimited},_requestTimeout:{value:p.requestTimeout||u.requestTimeout||h.requestTimeout}}),!this._apiKey)throw new Error("An API key is required to connect to Airtable")}return u.prototype.base=function(p){return t.default.createFunctor(this,p)},u.default_config=function(){return{endpointUrl:"https://api.airtable.com",apiVersion:"0.1.0",apiKey:void 0,noRetryIfRateLimited:!1,requestTimeout:300*1e3}},u.configure=function(p){var h=p.apiKey,d=p.endpointUrl,m=p.apiVersion,v=p.noRetryIfRateLimited,w=p.requestTimeout;u.apiKey=h,u.endpointUrl=d,u.apiVersion=m,u.noRetryIfRateLimited=v,u.requestTimeout=w},u.base=function(p){return new u().base(p)},u.Base=t.default,u.Record=n.default,u.Table=s.default,u.Error=a.default,u}();o.exports=c},{"./airtable_error":2,"./base":3,"./record":15,"./table":17}]},{},["airtable"])("airtable")})});var he=re(()=>{});var _e=re((ft,je)=>{je.exports={name:"jso",version:"4.1.1",description:"OAuth 2.0 implementation in Javascript",main:"dist/jso.js",module:"src/JSO.js",scripts:{test:"true",preversion:"npm test",version:"npm run build && git add -A dist",postversion:"git push && git push --tags && npm publish",build:"webpack --mode production --config webpack.config.js"},babel:{presets:["env"]},repository:{type:"git",url:"https://github.com/andreassolberg/jso.git"},keywords:["oauth","authentication","authorization","rest","api","ajax","jquery"],files:["src"],eslintConfig:{env:{es6:!0,browser:!0,node:!1}},devDependencies:{"babel-core":"^6.26.0","babel-loader":"^7.1.4","babel-preset-env":"^1.6.1","babel-preset-react":"^6.24.1",qunit:"^2.5.1",webpack:"^4.1.1","webpack-cli":"^2.0.12"},author:"Andreas \xC5kre Solberg",license:"LGPL-2.1",bugs:{url:"https://github.com/andreassolberg/jso/issues"},homepage:"https://github.com/andreassolberg/jso",dependencies:{}}});var oe=(O,i)=>(Array.isArray(i)||(i=[i]),i.map(e=>O.dispatchEvent(new Event(e,{bubbles:!0}))).every(e=>e));var ne=(O,i,l=document)=>{let e=l.querySelector(O);if(e instanceof i)return e};var be=ce(pe(),1);var se=ce(he());var M={};M.epoch=function(){return Math.round(new Date().getTime()/1e3)};M.debug=!1;M.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(O){var i=Math.random()*16|0,l=O=="x"?i:i&3|8;return l.toString(16)})};M.getResponseFromURL=function(O){return O.indexOf("#")!==-1?M.parseQueryString(O.substring(O.indexOf("#")+1)):O.indexOf("?")!==-1?M.parseQueryString(O.substring(O.indexOf("?")+1)):{}};M.parseQueryString=function(O){for(var i,l=/\+/g,e=/([^&;=]+)=?([^&;]*)/g,o=function(t){return decodeURIComponent(t.replace(l," "))},f=O,r={};i=e.exec(f);)r[o(i[1])]=o(i[2]);return r};M.scopeList=function(O){return M.uniqueList(O).join(" ")};M.uniqueList=function(O){for(var i={},l=[],e=0;e<O.length;e++)i[O[e]]=1;for(var o in i)i.hasOwnProperty(o)&&l.push(o);return l};M.log=function(O){if(!console||!console.log||!M.debug)return;let i=Array.prototype.slice.call(arguments);i.unshift("[JSO]"),console.log.apply(console,i)};M.encodeQS=function(O){let i="";var l,e=0;for(l in O)i+=(e++===0?"":"&")+encodeURIComponent(l)+"="+encodeURIComponent(O[l]);return i};M.encodeURL=function(O,i){var l=O,e,o=0,f=O.indexOf("?")===-1?"?":"&";for(e in i)l+=(o++===0?f:"&")+encodeURIComponent(e)+"="+encodeURIComponent(i[e]);return l};var k=M;var ae=class{constructor(){}saveState(i,l){localStorage.setItem("state-"+i,JSON.stringify(l))}getState(i){var l=JSON.parse(localStorage.getItem("state-"+i));return localStorage.removeItem("state-"+i),l}hasScope(i,l){var e;if(!i.scopes)return!1;for(e=0;e<i.scopes.length;e++)if(i.scopes[e]===l)return!0;return!1}filterTokens(i,l){var e,o,f=[],r=k.epoch(),t;for(l||(l=[]),e=0;e<i.length;e++){for(t=!0,i[e].expires&&i[e].expires<r+1&&(t=!1),o=0;o<l.length;o++)this.hasScope(i[e],l[o])||(t=!1);t&&f.push(i[e])}return f}saveTokens(i,l){localStorage.setItem("tokens-"+i,JSON.stringify(l))}getTokens(i){var l=JSON.parse(localStorage.getItem("tokens-"+i));return l||(l=[]),k.log("Token found when loooking up provider "+i+" in store "+window.location.href,l),l}wipeTokens(i){localStorage.removeItem("tokens-"+i)}saveToken(i,l){var e=this.getTokens(i);e=this.filterTokens(e),e.push(l),this.saveTokens(i,e)}getToken(i,l){var e=this.getTokens(i);return e=this.filterTokens(e,l),e.length<1?null:e[0]}},Ae=new ae,de=Ae;var U=class{constructor(i){console.log("Initializing a loader with url "+i),this.url=i}execute(){}};var Y=class extends U{execute(){return new Promise((i,l)=>{window.location=this.url})}};var H=class extends U{execute(){return new Promise((i,l)=>{window.popupCompleted=function(){var o=e.location.href;i(o)};var e=window.open(this.url,"jso-popup-auth","height=600,width=800");if(e===null)throw new Error("Error loading popup window");window.focus&&e.focus()})}};var q=class{constructor(i){for(var l in i)this[l]=i[l]}set(i,l){return this[i]=l,this}};var G=class extends q{};var V=class{constructor(i){this.jso=i}_fetch(i,l){return fetch(i,l).then(e=>{if(e.status===401)throw new G;return e})}fetch(i,l,e){if(e=e||0,e>2)throw new Error("Reccursion error. Expired tokens deleted and tried again multiple times.");let o={},f={mode:"cors"};return l&&(f=l,Object.assign(f,l)),l&&l.jso&&Object.assign(o,l.jso),this.jso.getToken(o).catch(r=>{console.error("Error fetching token to use ",r)}).then(r=>(f.headers||(f.headers={}),f.headers.Authorization="Bearer "+r.access_token,this._fetch(i,f).catch(t=>{if(t instanceof G)return console.error("Token was expired. Deleting all tokens for this provider and get a new one",t),this.jso.wipeTokens(),this.fetch(i,l,e+1)})))}};var Q=class extends q{toString(){let i=this.error||"unknown",l=this.error_description||"unknown";return"OAuthResponseError: ["+i+"]: "+l}};var X=class{constructor(){this.config={};for(var i=0;i<arguments.length;i++)Object.assign(this.config,arguments[i])}has(i){var l=this.config,e=i.split("."),o=0;for(o=0;o<e.length;o++)if(l.hasOwnProperty(e[o]))l=l[e[o]];else return!1;return!0}getValue(i,l,o){var o=o||!1,f=this.config,r=i.split("."),t=0;for(t=0;t<r.length;t++)if(f.hasOwnProperty(r[t]))f=f[r[t]];else{f=void 0;break}if(typeof f=="undefined"){if(o)throw new Error("Configuration option ["+r[t]+"] required but not provided.");return l}return f}};var W=class{on(i,l){this._callbacks||(this._callbacks={}),this._callbacks[i]||(this._callbacks[i]=[]),this._callbacks[i].push(l)}emit(i){this._callbacks||(this._callbacks={}),this._callbacks[i]||(this._callbacks[i]=[]);for(var l=Array.prototype.slice.call(arguments,1),e=0;e<this._callbacks[i].length;e++)this._callbacks[i][e].apply(this,l)}};var At=_e(),Ee={lifetime:3600},ee=class extends W{constructor(i){super(),this.configure(i),this.providerID=this.getProviderID(),this.Loader=Y,this.store=de,this.callbacks={},this.config.getValue("debug",!1)&&(k.debug=!0)}configure(i){this.config=new X(Ee,i)}setStore(i){this.store=i}setLoader(i){if(typeof i=="function")this.Loader=i;else throw new Error("loader MUST be an instance of the JSO BasicLoader")}getProviderID(){var i=this.config.getValue("providerID",null);if(i!==null)return i;var l=this.config.getValue("client_id",null,!0),e=this.config.getValue("authorization",null,!0);return e+"|"+l}processTokenResponse(i){let l;if(i.state)l=this.store.getState(i.state);else throw new Error("Could not get state from storage.");if(!l)throw new Error("Could not retrieve state");if(!l.providerID)throw new Error("Could not get providerid from state");return k.log("processTokenResponse ",i,""),this.processReceivedToken(i,l)}processReceivedToken(i,l){let e=k.epoch();return i.received=e,i.expires_in?(i.expires=e+parseInt(i.expires_in,10),i.expires_in=parseInt(i.expires_in,10)):this.config.getValue("default_lifetime",null)===!1?i.expires=null:this.config.has("permanent_scope")?this.store.hasScope(i,this.config.getValue("permanent_scope"))||(i.expires=null):this.config.has("default_lifetime")?i.expires=e+this.config.getValue("default_lifetime"):i.expires=e+3600,i.scope?(i.scopes=i.scope.split(" "),delete i.scope):l.scopes?i.scopes=l.scopes:i.scopes=[],k.log("processTokenResponse completed ",i,""),this.store.saveToken(l.providerID,i),l.restoreHash?window.location.hash=l.restoreHash:window.location.hash="",i}processAuthorizationCodeResponse(i){console.log(this),this.emit("authorizationCode",i);let l;if(i.state){if(l=this.store.getState(i.state),l===null){k.log("Could not find retrieve state object.");return}}else throw new Error("Could not find state paramter from callback.");if(console.log("state",l),!this.config.has("token")){k.log("Received an authorization code. Will not process it as the config option [token] endpoint is not set. If you would like to process the code yourself, please subscribe to the [authorizationCode] event");return}if(!this.config.has("client_secret"))throw new Error("Configuration missing [client_secret]");let e=new Headers;e.append("Authorization","Basic "+btoa(this.config.getValue("client_id")+":"+this.config.getValue("client_secret"))),e.append("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");let o={grant_type:"authorization_code",code:i.code};l.hasOwnProperty("redirect_uri")&&(o.redirect_uri=l.redirect_uri);let f={mode:"cors",headers:e,method:"POST",body:k.encodeQS(o)};return fetch(this.config.getValue("token"),f).then(r=>r.json()).then(r=>(k.log("Received response on token endpoint ",r,""),this.processReceivedToken(r,l)))}processErrorResponse(i){var l;if(i.state)l=this.store.getState(i.state);else throw new Error("Could not get [state] and no default providerid is provided.");if(!l)throw new Error("Could not retrieve state");if(!l.providerID)throw new Error("Could not get providerid from state");return l.restoreHash?window.location.hash=l.restoreHash:window.location.hash="",new Q(i)}callback(i){let l=null;if(typeof i=="object")l=i;else if(typeof i=="string")l=k.getResponseFromURL(i);else if(typeof i=="undefined")l=k.getResponseFromURL(window.location.href);else return;if(k.log("Receving response in callback",l),l.hasOwnProperty("access_token"))return this.processTokenResponse(l);if(l.hasOwnProperty("code"))return this.processAuthorizationCodeResponse(l);if(l.hasOwnProperty("error"))throw this.processErrorResponse(l)}dump(){var i=this.store.getTokens(this.providerID),l={providerID:this.providerID,tokens:i,config:this.config};return l}_getRequestScopes(i){var l=[],e;if(this.config.has("scopes.request")){let o=this.config.getValue("scopes.request");for(e=0;e<o.length;e++)l.push(o[e])}if(i&&i.scopes&&i.scopes.request)for(e=0;e<i.scopes.request.length;e++)l.push(i.scopes.request[e]);return k.uniqueList(l)}_getRequiredScopes(i){var l=[],e;if(this.config.has("scopes.require")){let o=this.config.getValue("scopes.require");for(e=0;e<o.length;e++)l.push(o[e])}if(i&&i.scopes&&i.scopes.require)for(e=0;e<i.scopes.require.length;e++)l.push(i.scopes.require[e]);return k.uniqueList(l)}getToken(i){return i=i||{},new Promise((l,e)=>{let o=this._getRequiredScopes(i),f=this.store.getToken(this.providerID,o);if(f)return l(f);if(i.hasOwnProperty("allowredir")&&!i.allowredir)throw new Error("Cannot obtain a token, when not allowed to redirect...");l(this._authorize(i))})}checkToken(i){var l=this._getRequiredScopes(i);return this.store.getToken(this.providerID,l)}_authorize(i){var l,e,o;return Promise.resolve().then(()=>{let f=this.config.getValue("authorization",null,!0),r=this.config.getValue("client_id",null,!0),t=!1;if(i.hasOwnProperty("allowia")||this.config.has("allowia"))throw new Error('The allowia option was removed in JSO 4.1.0. Instead use {request: {prompt: "none"}}');if(k.log("About to send an authorization request to this endpoint",f),k.log("Options",i),l={},this.config.has("request")){let s=this.config.getValue("request");l=(0,se.default)(l,s)}if(i.hasOwnProperty("request")&&(l=(0,se.default)(l,i.request)),l.response_type=i.response_type||this.config.getValue("response_type","id_token token"),l.state=k.uuid(),this.config.has("redirect_uri")&&(l.redirect_uri=this.config.getValue("redirect_uri","")),i.redirect_uri&&(l.redirect_uri=i.redirect_uri),l.client_id=r,o=this._getRequestScopes(i),t=o.includes("openid"),o.length>0&&(l.scope=k.scopeList(o)),k.log("Running in mode: "+(t?"OpenID Connect mode":"OAuth mode")),t&&!l.hasOwnProperty("redirect_uri"))throw new Error("An OpenID Request requires a redirect_uri to be set. Please add to configuration. A redirect_uri is not required for plain OAuth");t&&(l.nonce=k.uuid()),k.log("Debug Authentication request object",JSON.stringify(l,void 0,2)),e=k.encodeURL(f,l),window.location.hash&&(l.restoreHash=window.location.hash),l.providerID=this.providerID,o&&(l.scopes=o),k.log("Saving state ["+l.state+"]"),k.log(JSON.parse(JSON.stringify(l)));var n=this.Loader;return i.hasOwnProperty("loader")&&(n=i.loader),k.log("Looking for loader",i,n),this.store.saveState(l.state,l),this.gotoAuthorizeURL(e,n).then(s=>{if(s!==!0)return this.callback(s)})})}gotoAuthorizeURL(i,l){return new Promise(function(e,o){if(l!==null&&typeof l=="function"){var f=new l(i);if(!(f instanceof U))throw new Error("JSO selected Loader is not an instance of BasicLoader.");e(f.execute())}else o(new Error("Cannot redirect to authorization endpoint because of missing redirect handler"))})}wipeTokens(){this.store.wipeTokens(this.providerID)}};var Re="nef-3fAcxtMDg4oBpczTU9F6b0tXlIxwwAsWrNPNKIk",Se="aR21QXxCP1QnyAqbfg2Rix2gZqN-LtzVFrMt6Q4elFk",Pe={client_id:Re,client_secret:Se,redirect_uri:"https://minimal-ui-test.webflow.io/library",authorization:"https://gumroad.com/oauth/authorize",scopes:{request:["view_profile","view_sales"],require:["view_profile","view_sales"]},response_type:"code",token:"https://api.gumroad.com/oauth/token",debug:!0},Z=new ee(Pe);Z.callback();function Ie(){let O={redirect_uri:"https://minimal-ui-test.webflow.io/popup-callback"};Z.setLoader(H),Z.getToken(O).then(i=>{console.log("I got the token: ",i)}).catch(i=>{console.error("Error from passive loader",i)})}$("#btnAuthenticate").on("click",O=>{O.preventDefault(),Ie()});var te=Z.checkToken(),ge=document.querySelectorAll("[data-onlogin='hide']"),ve=document.querySelectorAll("[data-onlogin='show']");console.log(te);if(te!==null){ve.forEach(function(l){l.style.display="initial"}),ge.forEach(function(l){l.style.display="none"}),console.log("I got the token: ",te.access_token);let O=new V(Z),i="https://api.gumroad.com/v2/user";O.fetch(i,{access_token:te.access_token}).then(l=>l.json()).then(l=>{console.log("I got protected json data from the API",l)}).catch(l=>{console.error("Error from fetcher",l)})}else ge.forEach(function(O){O.style.display="initial"}),ve.forEach(function(O){O.style.display="none"});be.default.configure({apiKey:"keyoAJiztjElB9kPt"});window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{let O=ne('[fs-cmsfilter-element="reset"]',HTMLElement);!O||$(document).keyup(function(i){i.key==="Escape"&&(i.preventDefault(),oe(O,"click"))})});})();
